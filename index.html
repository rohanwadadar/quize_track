<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Zodiac Oracle ‚ú®</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Cinzel:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary: #8a2be2;
    --secondary: #00d4ff;
    --accent: #ff00ff;
    --success: #00ff88;
    --warning: #ffaa00;
    --danger: #ff5555;
    --dark: #0a0a1a;
    --light: #e6e6ff;
    --card-bg: rgba(20, 20, 40, 0.9);
    --card-border: rgba(100, 100, 255, 0.3);
}

body {
    font-family: 'Space Grotesk', sans-serif;
    background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%);
    color: var(--light);
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
}

.stars {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #000 url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><circle cx="50" cy="50" r="1" fill="white" opacity="0.5"/></svg>') repeat;
    z-index: -1;
}

.container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    position: relative;
    z-index: 1;
}

.header {
    text-align: center;
    padding: 30px 20px;
    background: rgba(10, 10, 30, 0.8);
    border-radius: 20px;
    margin-bottom: 30px;
    border: 1px solid var(--card-border);
    backdrop-filter: blur(10px);
}

.logo i {
    font-size: 3rem;
    color: var(--secondary);
    animation: glow 2s infinite alternate;
}

@keyframes glow {
    from { filter: drop-shadow(0 0 5px var(--secondary)); }
    to { filter: drop-shadow(0 0 20px var(--secondary)); }
}

.header h1 {
    font-family: 'Cinzel', serif;
    font-size: 2.5rem;
    background: linear-gradient(45deg, var(--secondary), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 15px 0 10px 0;
}

.tagline {
    color: var(--light);
    opacity: 0.8;
    font-size: 1rem;
}

.status-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 20px;
    background: rgba(0, 255, 136, 0.1);
    border: 1px solid var(--success);
    border-radius: 50px;
    color: var(--success);
    margin-top: 15px;
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--success);
    box-shadow: 0 0 10px var(--success);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* Step Card */
.step-card {
    background: var(--card-bg);
    border-radius: 20px;
    border: 2px solid var(--card-border);
    backdrop-filter: blur(10px);
    margin-bottom: 20px;
    overflow: hidden;
    transition: all 0.3s;
}

.step-card.active {
    border-color: var(--secondary);
    box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
}

.step-card.completed {
    border-color: var(--success);
    opacity: 0.7;
}

.step-header {
    padding: 20px 25px;
    background: linear-gradient(90deg, rgba(138, 43, 226, 0.3), rgba(0, 212, 255, 0.3));
    border-bottom: 1px solid var(--card-border);
    display: flex;
    align-items: center;
    gap: 15px;
    cursor: pointer;
}

.step-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--primary);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    font-weight: bold;
}

.step-card.completed .step-number {
    background: var(--success);
}

.step-card.active .step-number {
    background: var(--secondary);
    animation: glow 2s infinite alternate;
}

.step-title {
    flex: 1;
}

.step-title h3 {
    font-size: 1.3rem;
    margin-bottom: 5px;
}

.step-title p {
    font-size: 0.9rem;
    opacity: 0.7;
}

.check-icon {
    color: var(--success);
    font-size: 1.5rem;
    display: none;
}

.step-card.completed .check-icon {
    display: block;
}

.step-content {
    padding: 25px;
    display: none;
}

.step-card.active .step-content {
    display: block;
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.form-group {
    margin-bottom: 25px;
}

.form-group label {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    color: var(--secondary);
    font-weight: 500;
    font-size: 1rem;
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 15px;
    background: rgba(0, 0, 0, 0.3);
    border: 2px solid rgba(100, 100, 255, 0.2);
    border-radius: 12px;
    color: var(--light);
    font-size: 1rem;
    font-family: 'Space Grotesk', sans-serif;
    transition: all 0.3s;
}

.form-group textarea {
    min-height: 100px;
    resize: vertical;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--secondary);
    box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

/* Camera Section */
.camera-section {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    border: 2px dashed var(--secondary);
}

#video {
    width: 100%;
    max-width: 400px;
    border-radius: 15px;
    margin: 15px 0;
    display: none;
    border: 2px solid var(--secondary);
}

#canvas {
    display: none;
}

.camera-preview {
    width: 100%;
    max-width: 400px;
    border-radius: 15px;
    margin: 15px auto;
    display: none;
    border: 2px solid var(--success);
}

.location-info {
    background: rgba(0, 0, 0, 0.3);
    padding: 15px;
    border-radius: 12px;
    margin-top: 20px;
    border-left: 4px solid var(--warning);
    display: none;
}

.location-info i {
    color: var(--warning);
}

.btn-camera {
    padding: 12px 25px;
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    background: var(--secondary);
    color: var(--dark);
    display: inline-flex;
    align-items: center;
    gap: 10px;
    margin: 10px;
}

.btn-camera:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(0, 212, 255, 0.3);
}

.btn-retake {
    background: var(--accent);
    color: white;
}

.btn-disable {
    background: var(--danger);
    color: white;
}

/* Spirit Guides */
.spirit-guides {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

.guide-option {
    background: rgba(0, 0, 0, 0.3);
    border: 2px solid transparent;
    border-radius: 15px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
}

.guide-option:hover {
    border-color: var(--secondary);
    transform: translateY(-5px);
}

.guide-option.selected {
    border-color: var(--accent);
    background: rgba(255, 0, 255, 0.1);
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
}

.guide-emoji {
    font-size: 3rem;
    display: block;
    margin-bottom: 10px;
}

.guide-name {
    font-weight: 600;
    color: var(--light);
    display: block;
    margin-bottom: 5px;
}

.guide-power {
    font-size: 0.85rem;
    color: var(--secondary);
    opacity: 0.8;
}

.btn-next {
    width: 100%;
    padding: 15px;
    border: none;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    background: linear-gradient(45deg, var(--primary), var(--accent));
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}

.btn-next:hover:not(:disabled) {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(138, 43, 226, 0.5);
}

.btn-next:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Loading Overlay */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(10, 10, 26, 0.95);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    display: none;
}

.loading-spinner {
    width: 60px;
    height: 60px;
    border: 4px solid transparent;
    border-top: 4px solid var(--secondary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Fortune Display */
.fortune-display {
    background: var(--card-bg);
    border-radius: 20px;
    border: 2px solid var(--success);
    backdrop-filter: blur(10px);
    padding: 30px;
    margin-top: 20px;
    display: none;
    animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

.fortune-display.show {
    display: block;
}

.zodiac-profile {
    text-align: center;
    margin-bottom: 30px;
    padding-bottom: 25px;
    border-bottom: 2px solid var(--card-border);
}

.profile-with-photo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 30px;
    margin-bottom: 20px;
}

.user-photo {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 3px solid var(--secondary);
    object-fit: cover;
    box-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
}

.zodiac-icon-large {
    font-size: 5rem;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.fortune-display h2 {
    font-size: 2rem;
    background: linear-gradient(45deg, var(--secondary), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 10px;
}

.fortune-display .subtitle {
    color: var(--light);
    opacity: 0.8;
    margin-bottom: 15px;
}

.spirit-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    padding: 15px;
    background: rgba(255, 0, 255, 0.1);
    border-radius: 15px;
    margin-bottom: 25px;
}

.spirit-emoji-large {
    font-size: 3rem;
}

.fortune-section {
    background: rgba(0, 0, 0, 0.3);
    padding: 20px;
    border-radius: 15px;
    border-left: 4px solid var(--secondary);
    margin-bottom: 20px;
}

.fortune-section h4 {
    color: var(--secondary);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.fortune-text {
    line-height: 1.8;
    color: var(--light);
    opacity: 0.9;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-top: 25px;
}

.stat-box {
    background: rgba(0, 0, 0, 0.3);
    padding: 15px;
    border-radius: 12px;
    text-align: center;
    border: 1px solid var(--card-border);
}

.stat-label {
    color: var(--secondary);
    font-size: 0.9rem;
    margin-bottom: 8px;
    display: block;
}

.stat-value {
    color: var(--light);
    font-size: 1.3rem;
    font-weight: bold;
}

@media (max-width: 768px) {
    .spirit-guides {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .form-row {
        grid-template-columns: 1fr;
    }
    
    .profile-with-photo {
        flex-direction: column;
    }
}

.toast {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--success);
    color: var(--dark);
    padding: 12px 24px;
    border-radius: 50px;
    font-weight: 600;
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 10px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    animation: slideUp 0.3s ease-out;
    display: none;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}
    </style>
</head>
<body>
    <div class="stars"></div>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Connecting to the Cosmos...</p>
        <p style="font-size: 0.9rem; opacity: 0.7; margin-top: 10px;">Saving your data to the stars</p>
    </div>
    
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span>Data saved successfully!</span>
    </div>
    
    <div class="container">
        <!-- Header -->
        <header class="header">
            <i class="fas fa-crystal-ball"></i>
            <h1>Cosmic Zodiac Oracle</h1>
            <p class="tagline">Your Personal Fortune Awaits ‚ú®</p>
            <div class="status-badge">
                <span class="status-dot"></span>
                <span>Connected</span>
            </div>
        </header>

        <!-- Step 1: Personal Info -->
        <div class="step-card active" id="step1">
            <div class="step-header" onclick="toggleStep(1)">
                <div class="step-number">1</div>
                <div class="step-title">
                    <h3>Personal Information</h3>
                    <p>Tell us about yourself</p>
                </div>
                <i class="fas fa-check-circle check-icon"></i>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Your Name</label>
                    <input type="text" id="name" placeholder="Enter your name" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-calendar"></i> Birth Date</label>
                        <input type="date" id="birthDate" required>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-venus-mars"></i> Gender</label>
                        <select id="gender" required>
                            <option value="">Select gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                            <option value="Prefer not to say">Prefer not to say</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-phone"></i> Phone Number</label>
                    <input type="tel" id="phone" placeholder="Enter your phone number" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" id="email" placeholder="Enter your email" required>
                </div>
                <button class="btn-next" onclick="nextStep(1)">
                    <span>Next Step</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- Step 2: Photo & Location -->
        <div class="step-card" id="step2">
            <div class="step-header" onclick="toggleStep(2)">
                <div class="step-number">2</div>
                <div class="step-title">
                    <h3>Capture Your Cosmic Energy</h3>
                    <p>Take a photo for personalized reading</p>
                </div>
                <i class="fas fa-check-circle check-icon"></i>
            </div>
            <div class="step-content">
                <div class="camera-section">
                    <label><i class="fas fa-camera"></i> Take Your Photo</label>
                    <p style="opacity: 0.8; margin: 10px 0;">Your photo will be matched with your zodiac spirit animal</p>
                    <video id="video" autoplay></video>
                    <canvas id="canvas"></canvas>
                    <img id="photoPreview" class="camera-preview">
                    <div>
                        <button class="btn-camera" id="startCamera">
                            <i class="fas fa-camera"></i>
                            <span>Start Camera</span>
                        </button>
                        <button class="btn-camera" id="captureBtn" style="display: none;">
                            <i class="fas fa-camera-retro"></i>
                            <span>Capture Photo</span>
                        </button>
                        <button class="btn-camera btn-retake" id="retakeBtn" style="display: none;">
                            <i class="fas fa-redo"></i>
                            <span>Retake</span>
                        </button>
                        <button class="btn-camera btn-disable" id="disableCamera" style="display: none;">
                            <i class="fas fa-video-slash"></i>
                            <span>Disable Camera</span>
                        </button>
                    </div>
                </div>
                <div class="location-info" id="locationInfo">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Location captured: </span>
                    <span id="locationText">Fetching location...</span>
                </div>
                <button class="btn-next" id="photoNextBtn" onclick="nextStep(2)" disabled>
                    <span>Next Step</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- Step 3: Zodiac Sign -->
        <div class="step-card" id="step3">
            <div class="step-header" onclick="toggleStep(3)">
                <div class="step-number">3</div>
                <div class="step-title">
                    <h3>Zodiac Sign & Personality</h3>
                    <p>Select your sun sign and share more</p>
                </div>
                <i class="fas fa-check-circle check-icon"></i>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label><i class="fas fa-sun"></i> Your Zodiac Sign</label>
                    <select id="zodiacSign" required>
                        <option value="">Select your zodiac sign</option>
                        <option value="Aries">‚ôà Aries (Mar 21 - Apr 19)</option>
                        <option value="Taurus">‚ôâ Taurus (Apr 20 - May 20)</option>
                        <option value="Gemini">‚ôä Gemini (May 21 - Jun 20)</option>
                        <option value="Cancer">‚ôã Cancer (Jun 21 - Jul 22)</option>
                        <option value="Leo">‚ôå Leo (Jul 23 - Aug 22)</option>
                        <option value="Virgo">‚ôç Virgo (Aug 23 - Sep 22)</option>
                        <option value="Libra">‚ôé Libra (Sep 23 - Oct 22)</option>
                        <option value="Scorpio">‚ôè Scorpio (Oct 23 - Nov 21)</option>
                        <option value="Sagittarius">‚ôê Sagittarius (Nov 22 - Dec 21)</option>
                        <option value="Capricorn">‚ôë Capricorn (Dec 22 - Jan 19)</option>
                        <option value="Aquarius">‚ôí Aquarius (Jan 20 - Feb 18)</option>
                        <option value="Pisces">‚ôì Pisces (Feb 19 - Mar 20)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-brain"></i> Personality Traits</label>
                    <textarea id="personality" placeholder="Describe your personality, strengths, and weaknesses..."></textarea>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-dream"></i> Life Goals</label>
                    <textarea id="lifeGoals" placeholder="What are your main goals in life?"></textarea>
                </div>
                <button class="btn-next" onclick="nextStep(3)">
                    <span>Next Step</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- Step 4: Love Life -->
        <div class="step-card" id="step4">
            <div class="step-header" onclick="toggleStep(4)">
                <div class="step-number">4</div>
                <div class="step-title">
                    <h3>Love & Relationships</h3>
                    <p>Share your romantic journey</p>
                </div>
                <i class="fas fa-check-circle check-icon"></i>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label><i class="fas fa-heart"></i> Relationship Status</label>
                    <select id="relationshipStatus" required>
                        <option value="">Select status</option>
                        <option value="Single">Single</option>
                        <option value="In a relationship">In a relationship</option>
                        <option value="Engaged">Engaged</option>
                        <option value="Married">Married</option>
                        <option value="Divorced">Divorced</option>
                        <option value="Widowed">Widowed</option>
                        <option value="It's complicated">It's complicated</option>
                    </select>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-clock"></i> Time in Current Relationship</label>
                    <input type="text" id="relationshipDuration" placeholder="e.g., 2 years, 6 months, or 'Single'" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-users"></i> Number of Past Relationships</label>
                    <input type="number" id="pastRelationships" placeholder="Number of past relationships" min="0" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-heartbeat"></i> What are you seeking in love?</label>
                    <textarea id="loveGoals" placeholder="Describe your ideal relationship or what you're looking for..."></textarea>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-heart-broken"></i> Biggest Relationship Challenge</label>
                    <textarea id="relationshipChallenge" placeholder="What challenges have you faced in relationships?"></textarea>
                </div>
                <button class="btn-next" onclick="nextStep(4)">
                    <span>Next Step</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- Step 5: Spirit Guide -->
        <div class="step-card" id="step5">
            <div class="step-header" onclick="toggleStep(5)">
                <div class="step-number">5</div>
                <div class="step-title">
                    <h3>Spirit Guide</h3>
                    <p>Choose your cosmic companion</p>
                </div>
                <i class="fas fa-check-circle check-icon"></i>
            </div>
            <div class="step-content">
                <div class="form-group">
                    <label><i class="fas fa-paw"></i> Select Your Spirit Guide</label>
                    <p style="opacity: 0.8; margin-bottom: 15px;">Your spirit animal will be matched with your zodiac sign</p>
                    <div class="spirit-guides">
                        <div class="guide-option" data-animal="Phoenix" data-emoji="üî•" onclick="selectGuide(this)">
                            <span class="guide-emoji">üî•</span>
                            <span class="guide-name">Phoenix</span>
                            <span class="guide-power">Rebirth</span>
                        </div>
                        <div class="guide-option" data-animal="Wolf" data-emoji="üê∫" onclick="selectGuide(this)">
                            <span class="guide-emoji">üê∫</span>
                            <span class="guide-name">Wolf</span>
                            <span class="guide-power">Loyalty</span>
                        </div>
                        <div class="guide-option" data-animal="Dragon" data-emoji="üêâ" onclick="selectGuide(this)">
                            <span class="guide-emoji">üêâ</span>
                            <span class="guide-name">Dragon</span>
                            <span class="guide-power">Wisdom</span>
                        </div>
                        <div class="guide-option" data-animal="Owl" data-emoji="ü¶â" onclick="selectGuide(this)">
                            <span class="guide-emoji">ü¶â</span>
                            <span class="guide-name">Owl</span>
                            <span class="guide-power">Intuition</span>
                        </div>
                        <div class="guide-option" data-animal="Lion" data-emoji="ü¶Å" onclick="selectGuide(this)">
                            <span class="guide-emoji">ü¶Å</span>
                            <span class="guide-name">Lion</span>
                            <span class="guide-power">Courage</span>
                        </div>
                        <div class="guide-option" data-animal="Unicorn" data-emoji="ü¶Ñ" onclick="selectGuide(this)">
                            <span class="guide-emoji">ü¶Ñ</span>
                            <span class="guide-name">Unicorn</span>
                            <span class="guide-power">Magic</span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-comment-alt"></i> Special Message to the Universe</label>
                    <textarea id="universeMessage" placeholder="Write a message, wish, or question for the universe..."></textarea>
                </div>
                <button class="btn-next" onclick="generateFortune()">
                    <i class="fas fa-crystal-ball"></i>
                    <span>Generate My Fortune</span>
                </button>
            </div>
        </div>

        <!-- Fortune Display -->
        <div class="fortune-display" id="fortuneDisplay">
            <div class="zodiac-profile">
                <div class="profile-with-photo">
                    <img id="userPhotoDisplay" class="user-photo">
                    <div class="zodiac-icon-large" id="zodiacIcon">‚ú®</div>
                </div>
                <h2 id="fortuneName">Your Cosmic Reading</h2>
                <p class="subtitle" id="fortuneSubtitle">Gemini ‚Ä¢ Air Sign ‚Ä¢ Mercury</p>
            </div>

            <div class="spirit-display">
                <span class="spirit-emoji-large" id="spiritEmoji">ü¶Å</span>
                <div>
                    <strong style="color: var(--accent);">Spirit Guide:</strong>
                    <span id="spiritName" style="color: var(--light); margin-left: 10px;">Lion</span>
                </div>
            </div>

            <div class="fortune-section">
                <h4><i class="fas fa-sun"></i> Today's Energy</h4>
                <p class="fortune-text" id="dailyReading">Your cosmic reading will appear here...</p>
            </div>

            <div class="fortune-section">
                <h4><i class="fas fa-heart"></i> Love & Relationships</h4>
                <p class="fortune-text" id="loveReading">Your love forecast will appear here...</p>
            </div>

            <div class="fortune-section">
                <h4><i class="fas fa-brain"></i> Personality Insights</h4>
                <p class="fortune-text" id="personalityReading">Your personality analysis will appear here...</p>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <span class="stat-label">Luck Score</span>
                    <span class="stat-value" id="luckScore">8.5/10</span>
                </div>
                <div class="stat-box">
                    <span class="stat-label">Energy Level</span>
                    <span class="stat-value" id="energyLevel">High ‚ö°</span>
                </div>
                <div class="stat-box">
                    <span class="stat-label">Lucky Day</span>
                    <span class="stat-value" id="luckyDay">Wednesday</span>
                </div>
                <div class="stat-box">
                    <span class="stat-label">Power Color</span>
                    <span class="stat-value" id="powerColor">Yellow</span>
                </div>
            </div>
        </div>
    </div>

    <script>
// ==========================================
// CONFIGURATION
// ==========================================
const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyXZEO8fjy9QknunG5R9W28Nr5p0pmOPMBN6r55HSLRvb3p9KQlu6moAU99D2udhOydFA/exec';

const ZODIAC_DATA = {
    Aries: { emoji: '‚ôà', element: 'Fire', ruler: 'Mars', animal: 'Lion', traits: ['Courageous', 'Energetic', 'Impulsive'] },
    Taurus: { emoji: '‚ôâ', element: 'Earth', ruler: 'Venus', animal: 'Bull', traits: ['Reliable', 'Patient', 'Stubborn'] },
    Gemini: { emoji: '‚ôä', element: 'Air', ruler: 'Mercury', animal: 'Butterfly', traits: ['Adaptable', 'Curious', 'Indecisive'] },
    Cancer: { emoji: '‚ôã', element: 'Water', ruler: 'Moon', animal: 'Crab', traits: ['Emotional', 'Protective', 'Moody'] },
    Leo: { emoji: '‚ôå', element: 'Fire', ruler: 'Sun', animal: 'Lion', traits: ['Confident', 'Generous', 'Arrogant'] },
    Virgo: { emoji: '‚ôç', element: 'Earth', ruler: 'Mercury', animal: 'Owl', traits: ['Analytical', 'Practical', 'Critical'] },
    Libra: { emoji: '‚ôé', element: 'Air', ruler: 'Venus', animal: 'Swan', traits: ['Diplomatic', 'Social', 'Indecisive'] },
    Scorpio: { emoji: '‚ôè', element: 'Water', ruler: 'Pluto', animal: 'Phoenix', traits: ['Passionate', 'Determined', 'Secretive'] },
    Sagittarius: { emoji: '‚ôê', element: 'Fire', ruler: 'Jupiter', animal: 'Horse', traits: ['Optimistic', 'Adventurous', 'Tactless'] },
    Capricorn: { emoji: '‚ôë', element: 'Earth', ruler: 'Saturn', animal: 'Goat', traits: ['Ambitious', 'Disciplined', 'Pessimistic'] },
    Aquarius: { emoji: '‚ôí', element: 'Air', ruler: 'Uranus', animal: 'Dolphin', traits: ['Innovative', 'Humanitarian', 'Detached'] },
    Pisces: { emoji: '‚ôì', element: 'Water', ruler: 'Neptune', animal: 'Fish', traits: ['Compassionate', 'Artistic', 'Escapist'] }
};

// ==========================================
// GLOBAL VARIABLES
// ==========================================
let currentStep = 1;
let userData = {
    name: '',
    birthDate: '',
    gender: '',
    phone: '',
    email: '',
    photo: '',
    location: '',
    zodiac: '',
    personality: '',
    lifeGoals: '',
    relationshipStatus: '',
    relationshipDuration: '',
    pastRelationships: 0,
    loveGoals: '',
    relationshipChallenge: '',
    spiritGuide: '',
    spiritEmoji: '',
    universeMessage: ''
};
let stream = null;
let locationData = {};

// ==========================================
// STEP NAVIGATION
// ==========================================
function toggleStep(stepNumber) {
    const stepCard = document.getElementById(`step${stepNumber}`);
    if (stepCard.classList.contains('completed')) return;
    
    document.querySelectorAll('.step-card').forEach(card => {
        card.classList.remove('active');
    });
    
    if (!stepCard.classList.contains('completed')) {
        stepCard.classList.add('active');
        currentStep = stepNumber;
    }
}

function nextStep(current) {
    // Validate current step
    if (!validateStep(current)) return;
    
    // Mark current as completed
    const currentCard = document.getElementById(`step${current}`);
    currentCard.classList.remove('active');
    currentCard.classList.add('completed');
    
    // Show next step
    const nextStep = current + 1;
    if (nextStep <= 5) {
        const nextCard = document.getElementById(`step${nextStep}`);
        nextCard.classList.add('active');
        currentStep = nextStep;
        
        // Scroll to next step
        nextCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

function validateStep(step) {
    switch(step) {
        case 1:
            const name = document.getElementById('name').value.trim();
            const birthDate = document.getElementById('birthDate').value;
            const gender = document.getElementById('gender').value;
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('email').value.trim();
            
            if (!name || !birthDate || !gender || !phone || !email) {
                alert('Please fill all required fields in Step 1');
                return false;
            }
            
            // Save data
            userData.name = name;
            userData.birthDate = birthDate;
            userData.gender = gender;
            userData.phone = phone;
            userData.email = email;
            return true;
            
        case 2:
            if (!userData.photo) {
                alert('Please take a photo before proceeding');
                return false;
            }
            return true;
            
        case 3:
            const zodiac = document.getElementById('zodiacSign').value;
            if (!zodiac) {
                alert('Please select your zodiac sign');
                return false;
            }
            userData.zodiac = zodiac;
            userData.personality = document.getElementById('personality').value.trim();
            userData.lifeGoals = document.getElementById('lifeGoals').value.trim();
            return true;
            
        case 4:
            const relationshipStatus = document.getElementById('relationshipStatus').value;
            const relationshipDuration = document.getElementById('relationshipDuration').value.trim();
            const pastRelationships = document.getElementById('pastRelationships').value;
            
            if (!relationshipStatus || !relationshipDuration || pastRelationships === '') {
                alert('Please fill all required fields in Step 4');
                return false;
            }
            
            userData.relationshipStatus = relationshipStatus;
            userData.relationshipDuration = relationshipDuration;
            userData.pastRelationships = parseInt(pastRelationships) || 0;
            userData.loveGoals = document.getElementById('loveGoals').value.trim();
            userData.relationshipChallenge = document.getElementById('relationshipChallenge').value.trim();
            return true;
            
        case 5:
            if (!userData.spiritGuide) {
                alert('Please select a spirit guide');
                return false;
            }
            userData.universeMessage = document.getElementById('universeMessage').value.trim();
            return true;
    }
    return true;
}

// ==========================================
// CAMERA FUNCTIONALITY
// ==========================================
document.getElementById('startCamera').addEventListener('click', async () => {
    try {
        stream = await navigator.mediaDevices.getUserMedia({ 
            video: { 
                facingMode: 'user',
                width: { ideal: 1280 },
                height: { ideal: 720 }
            } 
        });
        
        const video = document.getElementById('video');
        video.srcObject = stream;
        video.style.display = 'block';
        
        document.getElementById('startCamera').style.display = 'none';
        document.getElementById('captureBtn').style.display = 'inline-flex';
        document.getElementById('disableCamera').style.display = 'inline-flex';
        
        // Get location
        getLocation();
        
    } catch (err) {
        alert('Camera access denied. Please allow camera access to continue.');
        console.error('Camera error:', err);
    }
});

document.getElementById('captureBtn').addEventListener('click', () => {
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const photoPreview = document.getElementById('photoPreview');
    
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const context = canvas.getContext('2d');
    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    
    const photoData = canvas.toDataURL('image/jpeg');
    photoPreview.src = photoData;
    photoPreview.style.display = 'block';
    video.style.display = 'none';
    
    userData.photo = photoData;
    
    document.getElementById('captureBtn').style.display = 'none';
    document.getElementById('retakeBtn').style.display = 'inline-flex';
    document.getElementById('photoNextBtn').disabled = false;
});

document.getElementById('retakeBtn').addEventListener('click', () => {
    const video = document.getElementById('video');
    const photoPreview = document.getElementById('photoPreview');
    
    photoPreview.style.display = 'none';
    video.style.display = 'block';
    
    document.getElementById('captureBtn').style.display = 'inline-flex';
    document.getElementById('retakeBtn').style.display = 'none';
    document.getElementById('photoNextBtn').disabled = true;
});

document.getElementById('disableCamera').addEventListener('click', () => {
    if (stream) {
        stream.getTracks().forEach(track => track.stop());
        stream = null;
    }
    
    document.getElementById('video').style.display = 'none';
    document.getElementById('startCamera').style.display = 'inline-flex';
    document.getElementById('captureBtn').style.display = 'none';
    document.getElementById('disableCamera').style.display = 'none';
});

// ==========================================
// LOCATION FUNCTIONALITY
// ==========================================
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            (position) => {
                locationData = {
                    latitude: position.coords.latitude,
                    longitude: position.coords.longitude,
                    accuracy: position.coords.accuracy
                };
                
                // Get approximate address using reverse geocoding
                getAddressFromCoordinates(position.coords.latitude, position.coords.longitude);
                
                userData.location = `${position.coords.latitude}, ${position.coords.longitude}`;
            },
            (error) => {
                console.error('Geolocation error:', error);
                document.getElementById('locationText').textContent = 'Location access denied';
                document.getElementById('locationInfo').style.display = 'block';
                userData.location = 'Location not available';
            },
            { 
                enableHighAccuracy: true,
                timeout: 5000,
                maximumAge: 0
            }
        );
    } else {
        document.getElementById('locationText').textContent = 'Geolocation not supported';
        document.getElementById('locationInfo').style.display = 'block';
        userData.location = 'Not supported';
    }
}

async function getAddressFromCoordinates(lat, lng) {
    try {
        const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18&addressdetails=1`);
        const data = await response.json();
        
        if (data.address) {
            const address = data.address;
            const locationString = `${address.road || ''} ${address.city || address.town || address.village || ''}, ${address.country || ''}`.trim();
            document.getElementById('locationText').textContent = locationString || 'Address not available';
        } else {
            document.getElementById('locationText').textContent = `${lat.toFixed(4)}, ${lng.toFixed(4)}`;
        }
    } catch (error) {
        document.getElementById('locationText').textContent = `${lat.toFixed(4)}, ${lng.toFixed(4)}`;
    }
    document.getElementById('locationInfo').style.display = 'block';
}

// ==========================================
// SPIRIT GUIDE SELECTION
// ==========================================
function selectGuide(element) {
    document.querySelectorAll('.guide-option').forEach(guide => {
        guide.classList.remove('selected');
    });
    
    element.classList.add('selected');
    userData.spiritGuide = element.dataset.animal;
    userData.spiritEmoji = element.dataset.emoji;
}

// ==========================================
// SAVE DATA TO GOOGLE SHEETS
// ==========================================
async function saveToGoogleSheets() {
    const loadingOverlay = document.getElementById('loadingOverlay');
    loadingOverlay.style.display = 'flex';
    
    try {
        // Prepare data for Google Sheets
        const formData = new FormData();
        formData.append('timestamp', new Date().toISOString());
        formData.append('name', userData.name);
        formData.append('birthDate', userData.birthDate);
        formData.append('gender', userData.gender);
        formData.append('phone', userData.phone);
        formData.append('email', userData.email);
        formData.append('photo', userData.photo ? 'Photo captured' : 'No photo');
        formData.append('location', userData.location);
        formData.append('zodiac', userData.zodiac);
        formData.append('personality', userData.personality);
        formData.append('lifeGoals', userData.lifeGoals);
        formData.append('relationshipStatus', userData.relationshipStatus);
        formData.append('relationshipDuration', userData.relationshipDuration);
        formData.append('pastRelationships', userData.pastRelationships);
        formData.append('loveGoals', userData.loveGoals);
        formData.append('relationshipChallenge', userData.relationshipChallenge);
        formData.append('spiritGuide', userData.spiritGuide);
        formData.append('universeMessage', userData.universeMessage);
        formData.append('latitude', locationData.latitude || '');
        formData.append('longitude', locationData.longitude || '');
        
        // Send to Google Sheets
        const response = await fetch(GOOGLE_SCRIPT_URL, {
            method: 'POST',
            body: formData,
            mode: 'no-cors' // Important for Google Apps Script
        });
        
        // Show success message
        setTimeout(() => {
            loadingOverlay.style.display = 'none';
            showToast('Data saved successfully!');
        }, 1500);
        
    } catch (error) {
        console.error('Error saving to Google Sheets:', error);
        loadingOverlay.style.display = 'none';
        showToast('Error saving data. Please try again.', 'error');
    }
}

function showToast(message, type = 'success') {
    const toast = document.getElementById('toast');
    const icon = toast.querySelector('i');
    
    if (type === 'error') {
        toast.style.background = 'var(--danger)';
        icon.className = 'fas fa-exclamation-circle';
    } else {
        toast.style.background = 'var(--success)';
        icon.className = 'fas fa-check-circle';
    }
    
    toast.querySelector('span').textContent = message;
    toast.style.display = 'flex';
    
    setTimeout(() => {
        toast.style.display = 'none';
    }, 3000);
}

// ==========================================
// GENERATE FORTUNE
// ==========================================
async function generateFortune() {
    if (!validateStep(5)) return;
    
    // Save all data to Google Sheets
    await saveToGoogleSheets();
    
    // Mark all steps as completed
    document.querySelectorAll('.step-card').forEach(card => {
        card.classList.add('completed');
        card.classList.remove('active');
    });
    
    // Hide all step cards
    document.querySelectorAll('.step-card').forEach(card => {
        card.style.display = 'none';
    });
    
    // Generate fortune readings
    generateFortuneContent();
    
    // Show fortune display
    const fortuneDisplay = document.getElementById('fortuneDisplay');
    fortuneDisplay.classList.add('show');
    fortuneDisplay.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function generateFortuneContent() {
    const zodiac = ZODIAC_DATA[userData.zodiac];
    
    // Display user photo if available
    if (userData.photo) {
        const userPhotoDisplay = document.getElementById('userPhotoDisplay');
        userPhotoDisplay.src = userData.photo;
        userPhotoDisplay.style.display = 'block';
    }
    
    // Set zodiac icon and info
    document.getElementById('zodiacIcon').textContent = zodiac.emoji;
    document.getElementById('fortuneName').textContent = `${userData.name}'s Cosmic Reading`;
    document.getElementById('fortuneSubtitle').textContent = `${userData.zodiac} ‚Ä¢ ${zodiac.element} Sign ‚Ä¢ ${zodiac.ruler}`;
    
    // Spirit guide
    document.getElementById('spiritEmoji').textContent = userData.spiritEmoji;
    document.getElementById('spiritName').textContent = userData.spiritGuide;
    
    // Generate readings
    const dailyReading = generateDailyReading(zodiac, userData);
    const loveReading = generateLoveReading(userData);
    const personalityReading = generatePersonalityReading(userData);
    
    document.getElementById('dailyReading').textContent = dailyReading;
    document.getElementById('loveReading').textContent = loveReading;
    document.getElementById('personalityReading').textContent = personalityReading;
    
    // Generate stats
    document.getElementById('luckScore').textContent = generateLuckScore();
    document.getElementById('energyLevel').textContent = generateEnergyLevel(zodiac);
    document.getElementById('luckyDay').textContent = generateLuckyDay(zodiac);
    document.getElementById('powerColor').textContent = generatePowerColor(zodiac);
}

function generateDailyReading(zodiac, userData) {
    const today = new Date();
    const dayOfMonth = today.getDate();
    const phrases = [
        `The stars align for you today, ${userData.name}! As a ${userData.zodiac}, your ${zodiac.element.toLowerCase()} element brings ${dayOfMonth % 3 === 0 ? 'creative energy' : 'strong intuition'}.`,
        `Your ${userData.spiritGuide} spirit guide watches over you. ${dayOfMonth % 5 === 0 ? 'Expect unexpected opportunities' : 'Focus on personal growth'}.`,
        `Mercury's movement suggests clear communication. ${userData.pastRelationships > 3 ? 'Lessons from past relationships guide you' : 'New connections await'}.`,
        `Cosmic energy peaks today. ${zodiac.traits[0]} traits will help you overcome challenges. Trust your ${userData.spiritGuide.toLowerCase()} instincts.`,
        `The universe hears your message: "${userData.universeMessage.substring(0, 50)}...". Answers will come in dreams or sudden insights.`
    ];
    
    return phrases[dayOfMonth % phrases.length];
}

function generateLoveReading(userData) {
    const basePhrase = `As ${userData.relationshipStatus.toLowerCase()}`;
    
    if (userData.relationshipStatus === 'Single') {
        return `${basePhrase}, the stars indicate you'll meet someone special within ${Math.max(1, 12 - userData.pastRelationships)} months. Your ${userData.spiritGuide} guide attracts ${userData.pastRelationships > 2 ? 'mature connections' : 'new experiences'}.`;
    } else if (userData.relationshipStatus.includes('relationship') || userData.relationshipStatus === 'Married') {
        return `${basePhrase} for ${userData.relationshipDuration}, cosmic harmony strengthens your bond. ${userData.pastRelationships > 0 ? 'Past lessons make this stronger' : 'This is your cosmic destiny'}. ${userData.loveGoals ? `Your wish for ${userData.loveGoals.toLowerCase()} aligns with Venus.` : ''}`;
    } else {
        return `${basePhrase}, healing continues. Your ${userData.spiritGuide} guide brings strength. ${userData.relationshipChallenge ? `The challenge of ${userData.relationshipChallenge.toLowerCase()} transforms into wisdom.` : 'New beginnings approach.'}`;
    }
}

function generatePersonalityReading(userData) {
    const zodiac = ZODIAC_DATA[userData.zodiac];
    return `Your ${userData.zodiac} nature combines ${zodiac.traits.join(', ').toLowerCase()}. ${userData.personality ? `You described yourself as ${userData.personality.toLowerCase()}.` : ''} ${userData.lifeGoals ? `Your goal of ${userData.lifeGoals.toLowerCase()} aligns with your ${zodiac.element.toLowerCase()} element's destiny.` : 'Your cosmic path unfolds uniquely.'}`;
}

function generateLuckScore() {
    const baseScore = 5 + Math.floor(Math.random() * 4);
    const decimal = Math.random();
    const total = baseScore + decimal;
    return `${total.toFixed(1)}/10`;
}

function generateEnergyLevel(zodiac) {
    const levels = ['Low ‚ö°', 'Medium ‚ö°', 'High ‚ö°', 'Very High ‚ö°‚ö°'];
    const index = zodiac.element === 'Fire' ? 3 : zodiac.element === 'Air' ? 2 : zodiac.element === 'Water' ? 1 : 0;
    return levels[index];
}

function generateLuckyDay(zodiac) {
    const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
    const index = zodiac.ruler === 'Mars' ? 1 : 
                  zodiac.ruler === 'Mercury' ? 2 : 
                  zodiac.ruler === 'Jupiter' ? 3 : 
                  zodiac.ruler === 'Venus' ? 4 : 
                  zodiac.ruler === 'Saturn' ? 5 : 
                  zodiac.ruler === 'Sun' ? 6 : 0;
    return days[index];
}

function generatePowerColor(zodiac) {
    const colors = {
        'Fire': ['Red', 'Orange', 'Gold'],
        'Earth': ['Green', 'Brown', 'Black'],
        'Air': ['Blue', 'Yellow', 'White'],
        'Water': ['Purple', 'Silver', 'Teal']
    };
    const zodiacColors = colors[zodiac.element];
    return zodiacColors[Math.floor(Math.random() * zodiacColors.length)];
}

// ==========================================
// INITIALIZE
// ==========================================
document.addEventListener('DOMContentLoaded', () => {
    // Set today's date as max for birth date
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('birthDate').max = today;
    
    // Initialize tooltips
    document.querySelectorAll('.form-group label').forEach(label => {
        const text = label.textContent;
        if (text.includes('*')) {
            label.innerHTML = label.innerHTML.replace('*', '<span style="color: var(--accent); margin-left: 2px;">*</span>');
        }
    });
});
    </script>
</body>
</html>
